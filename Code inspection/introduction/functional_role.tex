The class inspected is \textbf{StandardManager}.\\It belongs to the package \textit{org.apache.catalina.session}\\
The class inheritance is the following:
\begin{verbatim}
java.lang.Object
    org.apache.catalina.session.ManagerBase
        org.apache.catalina.session.StandardManager
\end{verbatim}

Implemented interfaces are:
\begin{verbatim}
PropertyChangeListener, EventListener, Lifecycle, Manager
\end{verbatim}
\lstset{firstnumber=79}
\begin{lstlisting}
/**
* Standard implementation of the <b>Manager</b> interface that provides
* simple session persistence across restarts of this component (such as
* when the entire server is shut down and restarted, or when a particular
* web application is reloaded.
* <p>
* <b>IMPLEMENTATION NOTE</b>:  Correct behavior of session storing and
* reloading depends upon external calls to the <code>start()</code> and
* <code>stop()</code> methods of this class at the correct times.
*
* @author Craig R. McClanahan
* @author Jean-Francois Arcand
* @version $Revision: 1.14.6.2 $ $Date: 2008/04/17 18:37:20 $
*/
\end{lstlisting}
\paragraph{Description} StandardManager inherits from ManagerBase, a minimal implementation of the Manager interface that supports no session persistence or distributable capabilities. On the contrary, StandardManager manages the persistence of sessions when occurs start or stop events on the component. Lifecycle interface is responsible for component lifecycle methods. Components may implement this interface in order to provide a consistent mechanism to start and stop the components.\\

\title{{\large \textbf{unload(boolean doExpire, boolean isShutDown)}}}
\lstset{firstnumber=626}
\begin{lstlisting}
/**
* Save any currently active sessions in the appropriate persistence
* mechanism, if any.  If persistence is not supported, this method
* returns without doing anything.
*
* @doExpire true if the unloaded sessions are to be expired, false
* otherwise
* @param isShutdown true if this manager is being stopped as part of a
* domain shutdown (as opposed to an undeployment), and false otherwise
*
* @exception IOException if an input/output error occurs
*/
protected void unload(boolean doExpire, boolean isShutdown) throws IOException
\end{lstlisting}
\paragraph{Description} This method checks if package protection mechanism is enabled. If so doUnload(boolean, boolean) method is performed with privileges enabled by AccessController.doPrivileged(PrivilegedExceptionAction$\langle T \rangle$) method. If the action's method throws an exception, it will propagate through the latter method. Otherwise doUnload(boolean, boolean) method is simply executed. If an exception occurs, it will be rethrown without handling.

\title{{\large \textbf{doUnload(boolean doExpire, boolean isShutdown)}}}
\lstset{firstnumber=657}
\begin{lstlisting}
/**
* Saves any currently active sessions to file.
*
* @doExpire true if the unloaded sessions are to be expired, false
* otherwise
*
* @exception IOException if an input/output error occurs
*/
private void doUnload(boolean doExpire, boolean isShutdown) throws IOException
\end{lstlisting}
\paragraph{Description} This method checks isShutDown parameter. If it's true the session is saved. A new file (through file() method) and its output stream are opened. On this output stream are written all active sessions through writeSession(OutputStream, boolean) method. If isShutDown is false or file is not valid or an exception occurs sessions will not be written

